{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
Please take a decision
{% endblock %}

{% block content %}

{% include "truncated_reporting/lottery_presentation.html" %}
<br>
<div class="row">
  <div class="col">
    <div class="card" tabindex="0" data-bs-trigger="hover focus" 
    id="card_belief"
    data-bs-content="Please carefully think about the lottery above. You can answer the question after 5 seconds have passed">
      <div class="card-body" style="background-color:#e0e0e0;"  id="card_belief_body">
        {% include "truncated_reporting/belief_elicitation.html" %}
      </div>
    </div>
    
  </div>
</div>

<br>

  <div class="row">
    <div class="col">
      <div class="card" tabindex="0" data-bs-trigger="hover focus" 
        id="card_wtp"
        data-bs-content="Please answer the question above first." >
        <div class="card-body" style="background-color:#e0e0e0;" id="card_wtp_body">
          {% include "truncated_reporting/wtp_elicitation.html" %}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <table class="table borderless" style="text-align: center">
        <tr>
            <td colspan="2">
                <button type="submit" class="btn btn-primary" id="confirm" disabled>Next</button>
            </td>
        </tr>
      </table>
    </div>
  </div>

<div class="row">
  <div class="col">
    {% include "truncated_reporting/dropdown_instructions.html" %}
  </div>
</div>

<input type="hidden" name="belief_sequence" id="belief_sequence" />

{% if form.belief_sequence.errors %}{{ form.belief_sequence.errors.0 }}{% endif %}
{% if form.belief.errors %}{{ form.belief.errors.0 }}{% endif %}
{% if form.wtp_lottery.errors %}{{ form.wtp_lottery.errors.0 }}{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<script>

    // Turn on popover for elements
    var div_wtp = document.getElementById("card_wtp");
    var popover_wtp = new bootstrap.Popover(div_wtp)

    var div_belief = document.getElementById("card_belief");
    var popover_belief = new bootstrap.Popover(div_belief)
    
    // Enable slider after 5 seconds and change color
    setTimeout(function () {
      // Enable slider
      document.getElementById("id_belief_slider").disabled = false;

      // Change color of belief card
      var card_belief_body = document.getElementById("card_belief_body");
      card_belief_body.style.backgroundColor = "#FFFFFF";
      
      // Turn off popover for the entire card
      $('#card_belief').popover('disable');
    }, 5000);
</script>  



{% endblock %}


